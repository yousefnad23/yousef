<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>لعبة الجدول الدوري - تعلم بأسلوب ممتع</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --nonmetal: #a5f0c5;
            --noble-gas: #bde0fe;
            --alkali-metal: #ff9aa2;
            --alkaline-earth: #ffb7b2;
            --metalloid: #cdb4db;
            --halogen: #ffd166;
            --metal: #fdffb6;
            --transition-metal: #ffafcc;
            --lanthanide: #c8a2c8;
            --actinide: #b392ac;
            --post-transition: #a2d2ff;
            --unknown: #e0e0e0;
            --chat-primary: #4e54c8;
            --chat-secondary: #8f94fb;
            --bg-primary: #f8f9fa;
            --bg-secondary: #ffffff;
            --text-primary: #212529;
            --text-secondary: #495057;
        }

        .dark-mode {
            --primary: #3498db;
            --secondary: #2c3e50;
            --accent: #e74c3c;
            --light: #34495e;
            --dark: #ecf0f1;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #c0392b;
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --text-primary: #e6e6e6;
            --text-secondary: #b8b8b8;
            --nonmetal: #2a9d8f;
            --noble-gas: #3d5a80;
            --alkali-metal: #e76f51;
            --alkaline-earth: #f4a261;
            --metalloid: #9b5de5;
            --halogen: #ffd166;
            --metal: #fca311;
            --transition-metal: #e63946;
            --lanthanide: #7209b7;
            --actinide: #560bad;
            --post-transition: #4cc9f0;
            --unknown: #6c757d;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        
        body {
            background: linear-gradient(120deg, #1a2a6c, #b21f1f, #fdbb2d);
            background-attachment: fixed;
            background-size: 600% 600%;
            animation: gradientBackground 15s ease infinite;
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            padding: 15px;
            overflow-x: hidden;
        }
        
        .dark-mode body {
            background: linear-gradient(120deg, #0f1a3d, #571111, #8a5c0f);
        }
        
        @keyframes gradientBackground {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 15px;
        }
        
        header {
            text-align: center;
            padding: 20px 15px;
            background: rgba(44, 62, 80, 0.9);
            color: white;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        .dark-mode header {
            background: rgba(25, 35, 45, 0.9);
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://images.unsplash.com/photo-1635070041078-e363dbe005cb?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');
            background-size: cover;
            opacity: 0.1;
            z-index: -1;
        }
        
        h1 {
            font-size: 2rem;
            margin-bottom: 12px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            color: #fff;
        }
        
        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 12px;
            color: #fff;
        }
        
        .game-selection {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .game-card {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 20px;
            width: 100%;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
            transition: all 0.3s;
            cursor: pointer;
            color: var(--text-primary);
        }
        
        .game-card:active {
            transform: scale(0.98);
        }
        
        .game-card h3 {
            color: var(--secondary);
            margin-bottom: 12px;
            font-size: 1.3rem;
        }
        
        .game-card p {
            margin-bottom: 15px;
            color: var(--text-secondary);
            font-size: 1rem;
        }
        
        .btn {
            background: linear-gradient(to right, var(--secondary), var(--primary));
            color: white;
            border: none;
            padding: 14px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            font-size: 1rem;
            min-height: 50px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn:active {
            transform: scale(0.95);
        }
        
        .game-area {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin-bottom: 25px;
            display: none;
            color: var(--text-primary);
        }
        
        .question {
            font-size: 1.4rem;
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
            color: var(--primary);
            line-height: 1.4;
        }
        
        .options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .option {
            background-color: var(--light);
            padding: 18px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1rem;
            font-weight: 500;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
        }
        
        .dark-mode .option {
            background-color: var(--bg-primary);
        }
        
        .option:active {
            transform: scale(0.98);
        }
        
        .score-board {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            background: rgba(44, 62, 80, 0.1);
            padding: 12px;
            border-radius: 12px;
            flex-wrap: wrap;
        }
        
        .dark-mode .score-board {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .score, .timer {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--primary);
            margin: 5px 0;
        }
        
        .correct {
            background-color: var(--success);
            color: white;
        }
        
        .wrong {
            background-color: var(--danger);
            color: white;
        }
        
        .periodic-table-container {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin-bottom: 25px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .periodic-table {
            display: grid;
            grid-template-columns: repeat(18, minmax(40px, 1fr));
            gap: 4px;
            margin: 0 auto;
            min-width: 800px;
        }
        
        .element {
            padding: 8px 4px;
            text-align: center;
            border-radius: 6px;
            font-size: 0.8rem;
            background-color: var(--light);
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            min-height: 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .dark-mode .element {
            background-color: var(--bg-primary);
        }
        
        .element:active {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 10;
        }
        
        .element .number {
            font-size: 0.7rem;
            opacity: 0.7;
            font-weight: bold;
        }
        
        .element .symbol {
            font-weight: bold;
            font-size: 1rem;
            margin: 3px 0;
        }
        
        .element .name {
            font-size: 0.6rem;
            opacity: 0.9;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .nonmetal { background-color: var(--nonmetal); }
        .noble-gas { background-color: var(--noble-gas); }
        .alkali-metal { background-color: var(--alkali-metal); }
        .alkaline-earth { background-color: var(--alkaline-earth); }
        .metalloid { background-color: var(--metalloid); }
        .halogen { background-color: var(--halogen); }
        .metal { background-color: var(--metal); }
        .transition-metal { background-color: var(--transition-metal); }
        .lanthanide { background-color: var(--lanthanide); }
        .actinide { background-color: var(--actinide); }
        .post-transition { background-color: var(--post-transition); }
        .unknown { background-color: var(--unknown); }
        
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 25px;
            color: white;
            background: rgba(44, 62, 80, 0.9);
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            font-size: 0.9rem;
        }
        
        .dark-mode footer {
            background: rgba(25, 35, 45, 0.9);
        }
        
        .footer-content {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .footer-text {
            margin: 0 10px;
        }
        
        .social-icons {
            display: flex;
            gap: 20px;
        }
        
        .social-icon {
            color: white;
            font-size: 1.8rem;
            transition: all 0.3s;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .social-icon:hover {
            transform: scale(1.2);
            background: rgba(255, 255, 255, 0.2);
        }
        
        .whatsapp:hover {
            color: #25D366;
        }
        
        .facebook:hover {
            color: #3b5998;
        }
        
        .answer-feedback {
            text-align: center;
            margin: 15px 0;
            font-weight: bold;
            min-height: 24px;
        }
        
        .correct-answer {
            color: var(--success);
        }
        
        .wrong-answer {
            color: var(--danger);
        }
        
        .progress-bar {
            height: 10px;
            background-color: #ecf0f1;
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .dark-mode .progress-bar {
            background-color: #2c3e50;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(to right, var(--secondary), var(--primary));
            border-radius: 8px;
            width: 0%;
            transition: width 0.5s;
        }
        
        .element-details {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--bg-secondary);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            width: 90%;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            color: var(--text-primary);
        }
        
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--danger);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.1rem;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1001;
        }
        
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
        }
        
        /* شات بوت - تم تعديله ليكون على اليمين */
        .chat-bot-container {
            position: fixed;
            bottom: 90px;
            right: 20px;
            z-index: 1000;
            width: 60px;
            height: 120px;
        }
        
        .chat-button {
            background: linear-gradient(to right, var(--chat-primary), var(--chat-secondary));
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            font-size: 1.5rem;
        }
        
        .chat-button:active {
            transform: scale(0.95);
        }
        
        .chat-window {
            background: var(--bg-secondary);
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            margin-bottom: 15px;
            display: none;
            max-height: 400px;
            flex-direction: column;
            position: absolute;
            bottom: 70px;
            right: 0;
            width: 320px;
        }
        
        .chat-header {
            background: linear-gradient(to right, var(--chat-primary), var(--chat-secondary));
            color: white;
            padding: 15px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chat-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
        }
        
        .chat-messages {
            padding: 15px;
            overflow-y: auto;
            flex-grow: 1;
            max-height: 300px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 18px;
            margin-bottom: 10px;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .bot-message {
            background: #f0f0f0;
            color: #333;
            border-top-left-radius: 5px;
            align-self: flex-start;
            text-align: left;
        }
        
        .dark-mode .bot-message {
            background: #2c3e50;
            color: white;
        }
        
        .user-message {
            background: var(--chat-primary);
            color: white;
            border-top-right-radius: 5px;
            align-self: flex-end;
            text-align: right;
        }
        
        .chat-input-container {
            display: flex;
            padding: 10px;
            border-top: 1px solid #eee;
            background: #f9f9f9;
        }
        
        .dark-mode .chat-input-container {
            background: var(--bg-primary);
            border-top: 1px solid #444;
        }
        
        .chat-input {
            flex-grow: 1;
            border: 1px solid #ddd;
            border-radius: 20px;
            padding: 10px 15px;
            outline: none;
            background: var(--bg-secondary);
            color: var(--text-primary);
        }
        
        .dark-mode .chat-input {
            border: 1px solid #444;
        }
        
        .chat-send {
            background: var(--chat-primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            margin-left: 10px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .suggested-questions {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 10px;
        }
        
        .suggested-question {
            background: #e9e9ff;
            color: var(--chat-primary);
            border: none;
            border-radius: 15px;
            padding: 8px 12px;
            font-size: 0.9rem;
            cursor: pointer;
            text-align: left;
            transition: all 0.3s;
        }
        
        .dark-mode .suggested-question {
            background: #2c3e50;
            color: #bde0fe;
        }
        
        .suggested-question:active {
            background: #d0d0f0;
        }
        
        .dark-mode .suggested-question:active {
            background: #34495e;
        }
        
        /* أيقونات وسائل التواصل الاجتماعي - تم تعديلها لتصبح ثابتة في الأسفل على اليمين */
        .social-icons-fixed {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .social-icon-fixed {
            color: white;
            font-size: 1.5rem;
            transition: all 0.3s;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            animation: float 3s ease-in-out infinite;
        }
        
        .social-icon-fixed:nth-child(2) {
            animation-delay: 0.5s;
        }
        
        .social-icon-fixed:hover {
            transform: scale(1.2) rotate(10deg);
            background: rgba(255, 255, 255, 0.3);
        }
        
        .social-whatsapp:hover {
            color: #25D366;
            background: rgba(37, 211, 102, 0.2) !important;
        }
        
        .social-facebook:hover {
            color: #3b5998;
            background: rgba(59, 89, 152, 0.2) !important;
        }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        /* زر الوضع الليلي */
        .dark-mode-toggle {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: var(--secondary);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.3rem;
            z-index: 100;
            transition: all 0.3s;
        }
        
        .dark-mode-toggle:active {
            transform: scale(0.9);
        }
        
        .category-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            margin: 15px 0;
            padding: 12px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 12px;
        }
        
        .dark-mode .category-legend {
            background: rgba(0, 0, 0, 0.2);
        }
        
        .category-item {
            display: flex;
            align-items: center;
            margin: 3px;
            padding: 6px 12px;
            border-radius: 18px;
            background: var(--bg-secondary);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            font-size: 0.85rem;
            color: var(--text-primary);
        }
        
        .category-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            margin-right: 6px;
        }
        
        .element-details-content {
            margin-top: 15px;
        }
        
        .element-details-content h3 {
            color: var(--primary);
            margin-bottom: 12px;
            text-align: center;
            font-size: 1.5rem;
        }
        
        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            font-size: 0.95rem;
        }
        
        .dark-mode .detail-row {
            border-bottom: 1px solid #444;
        }
        
        .detail-label {
            font-weight: bold;
            color: var(--primary);
        }
        
        .celebrate {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            pointer-events: none;
            display: none;
        }
        
        .confetti {
            position: absolute;
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
        }
        
        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            animation: floatParticle 10s infinite ease-in-out;
        }
        
        .dark-mode .particle {
            background: rgba(255, 255, 255, 0.2);
        }
        
        @keyframes floatParticle {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }

        /* تحسينات للأجهزة ذات الشاشات الصغيرة جدًا */
        @media (max-width: 360px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.6rem;
            }
            
            .subtitle {
                font-size: 0.9rem;
            }
            
            .game-card {
                padding: 15px;
            }
            
            .game-card h3 {
                font-size: 1.2rem;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 0.9rem;
            }
            
            .category-item {
                font-size: 0.8rem;
                padding: 5px 10px;
            }
            
            .social-icon {
                font-size: 1.3rem;
                width: 40px;
                height: 40px;
            }
            
            .chat-bot-container {
                width: 50px;
                height: 50px;
                right: 10px;
                bottom: 80px;
            }
            
            .chat-button {
                width: 50px;
                height: 50px;
                font-size: 1.3rem;
            }
            
            .chat-window {
                width: 280px;
                right: -10px;
            }
            
            .social-icons-fixed {
                bottom: 10px;
                right: 10px;
            }
            
            .social-icon-fixed {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
            
            .dark-mode-toggle {
                width: 45px;
                height: 45px;
                font-size: 1.1rem;
                bottom: 15px;
                left: 15px;
            }
        }

        /* تحسينات للوضع الأفقي على الهواتف */
        @media (max-height: 500px) and (orientation: landscape) {
            .game-selection {
                flex-direction: row;
                flex-wrap: wrap;
            }
            
            .game-card {
                width: calc(33.333% - 15px);
                padding: 15px;
            }
            
            .options {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .option {
                padding: 12px;
                min-height: 50px;
                font-size: 1rem;
            }
            
            .chat-bot-container {
                bottom: 70px;
            }
            
            .chat-window {
                max-height: 250px;
            }
            
            .chat-messages {
                max-height: 150px;
            }
            
            .social-icons-fixed {
                bottom: 10px;
                right: 10px;
            }
        }
        
        /* تحسينات للجدول الدوري */
        .periodic-table {
            display: grid;
            grid-template-columns: repeat(18, minmax(40px, 1fr));
            gap: 4px;
            margin: 0 auto;
            min-width: 800px;
        }
        
        .empty-cell {
            padding: 8px 4px;
            min-height: 60px;
            visibility: hidden;
        }
        
        .lanthanide-actinide-row {
            display: grid;
            grid-template-columns: repeat(15, minmax(40px, 1fr));
            gap: 4px;
            margin-top: 20px;
        }
        
        .lanthanide-actinide-container {
            display: flex;
            flex-direction: column;
            gap: 4px;
            margin-top: 15px;
        }
        
        .periodic-table-title {
            text-align: center;
            margin: 10px 0;
            font-weight: bold;
            color: var(--primary);
        }
        
        .group-label {
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 0.8rem;
            padding: 5px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            margin-bottom: 5px;
        }
        
        .dark-mode .group-label {
            background: rgba(0, 0, 0, 0.2);
            color: white;
        }
        
        .period-label {
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 0.8rem;
            padding: 5px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            margin-right: 5px;
            width: 25px;
        }
        
        .dark-mode .period-label {
            background: rgba(0, 0, 0, 0.2);
            color: white;
        }
        
        .periodic-table-with-labels {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 5px;
        }
        
        .period-numbers {
            display: grid;
            grid-template-rows: repeat(7, 1fr);
            gap: 4px;
            align-content: center;
            margin-right: 10px;
        }
        
        .group-numbers {
            display: grid;
            grid-template-columns: repeat(18, 1fr);
            gap: 4px;
            margin-bottom: 5px;
        }
        
        /* تحسينات جديدة للجدول الدوري */
        .periodic-table-wrapper {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        .group-labels {
            display: grid;
            grid-template-columns: repeat(18, minmax(40px, 1fr));
            gap: 4px;
            margin-bottom: 5px;
            width: 100%;
        }
        
        .group-label-cell {
            text-align: center;
            font-weight: bold;
            font-size: 0.8rem;
            padding: 5px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }
        
        .dark-mode .group-label-cell {
            background: rgba(0, 0, 0, 0.2);
            color: white;
        }
        
        .period-row {
            display: flex;
            margin-bottom: 4px;
        }
        
        .period-label-cell {
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 0.8rem;
            padding: 5px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            margin-right: 5px;
            width: 25px;
            min-height: 60px;
        }
        
        .dark-mode .period-label-cell {
            background: rgba(0, 0, 0, 0.2);
            color: white;
        }
        
        .period-elements {
            display: grid;
            grid-template-columns: repeat(18, minmax(40px, 1fr));
            gap: 4px;
        }
        
        .lanthanide-actinide-wrapper {
            display: flex;
            flex-direction: column;
            margin-top: 15px;
        }
        
        .lanthanide-actinide-label {
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 0.8rem;
            padding: 5px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            margin-right: 5px;
            width: 25px;
            min-height: 60px;
        }
        
        .dark-mode .lanthanide-actinide-label {
            background: rgba(0, 0, 0, 0.2);
            color: white;
        }
        
        .spacer-cell {
            min-height: 60px;
        }
        
        /* تعديلات لاتجاه LTR */
        .periodic-table, .group-labels, .period-elements {
            direction: ltr;
        }
        
        .periodic-table-container {
            direction: ltr;
        }
        
        .element {
            direction: ltr;
        }
        
        /* تحسينات التنسيق للجدول الدوري */
        .table-container {
            width: 100%;
            overflow-x: auto;
        }
        
        .element-row {
            display: flex;
            margin-bottom: 4px;
        }
        
        .element-cell {
            flex: 1;
            min-width: 60px;
            margin: 2px;
            padding: 8px 4px;
            text-align: center;
            border-radius: 6px;
            font-size: 0.8rem;
            background-color: var(--light);
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            min-height: 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .dark-mode .element-cell {
            background-color: var(--bg-primary);
        }
        
        /* تنسيق الجدول الدوري المنظم */
        .periodic-grid {
            display: grid;
            grid-template-columns: repeat(18, minmax(50px, 1fr));
            gap: 4px;
            margin: 0 auto;
            max-width: 1000px;
            direction: ltr;
        }
        
        .grid-element {
            padding: 8px 4px;
            text-align: center;
            border-radius: 6px;
            font-size: 0.8rem;
            background-color: var(--light);
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            min-height: 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .dark-mode .grid-element {
            background-color: var(--bg-primary);
        }
        
        .grid-gap {
            grid-column: span 1;
        }
        
        .element-category-1 { background-color: var(--alkali-metal); }
        .element-category-2 { background-color: var(--alkaline-earth); }
        .element-category-3 { background-color: var(--transition-metal); }
        .element-category-4 { background-color: var(--post-transition); }
        .element-category-5 { background-color: var(--metalloid); }
        .element-category-6 { background-color: var(--nonmetal); }
        .element-category-7 { background-color: var(--halogen); }
        .element-category-8 { background-color: var(--noble-gas); }
        .element-category-9 { background-color: var(--lanthanide); }
        .element-category-10 { background-color: var(--actinide); }
        
        @media (max-width: 768px) {
            .periodic-grid {
                grid-template-columns: repeat(18, minmax(30px, 1fr));
                gap: 2px;
            }
            
            .grid-element {
                padding: 4px 2px;
                font-size: 0.7rem;
                min-height: 45px;
            }
            
            .grid-element .number {
                font-size: 0.6rem;
            }
            
            .grid-element .symbol {
                font-size: 0.9rem;
            }
            
            .grid-element .name {
                font-size: 0.5rem;
            }
        }
        
        @media (min-width: 768px) {
            .container {
                max-width: 720px;
            }
            
            .game-selection {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .game-card {
                width: calc(50% - 15px);
            }
            
            .options {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .footer-content {
                flex-wrap: nowrap;
            }
        }
        
        @media (min-width: 992px) {
            .container {
                max-width: 960px;
            }
            
            .game-card {
                width: calc(33.333% - 20px);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-atom"></i> لعبة الجدول الدوري الممتعة</h1>
            <p class="subtitle">تعلم وحفظ العناصر الكيميائية بطريقة تفاعلية مسلية</p>
        </header>
        
        <div class="game-selection">
            <div class="game-card" onclick="startGame('symbolToName')">
                <h3><i class="fas fa-exchange-alt"></i> من الرمز إلى الاسم</h3>
                <p>اختر الاسم الصحيح للعنصر بناءً على رمزه الكيميائي</p>
                <button class="btn">ابدأ اللعبة</button>
            </div>
            
            <div class="game-card" onclick="startGame('nameToSymbol')">
                <h3><i class="fas fa-exchange-alt"></i> من الاسم إلى الرمز</h3>
                <p>اختر الرمز الصحيح للعنصر بناءً على اسمه</p>
                <button class="btn">ابدأ اللعبة</button>
            </div>
            
            <div class="game-card" onclick="startGame('numberToElement')">
                <h3><i class="fas fa-exchange-alt"></i> من الرقم إلى العن권</h3>
                <p>اختر العنصر الصحيح بناءً على عدده الذري</p>
                <button class="btn">ابدأ اللعبة</button>
            </div>
        </div>
        
        <div id="gameArea" class="game-area">
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            
            <div class="score-board">
                <div class="score">النقاط: <span id="score">0</span></div>
                <div class="timer">الوقت: <span id="timer">60</span> ثانية</div>
            </div>
            
            <div class="question" id="question"></div>
            
            <div class="answer-feedback" id="answerFeedback"></div>
            
            <div class="options" id="options"></div>
            
            <div style="text-align: center;">
                <button class="btn" onclick="nextQuestion()" id="nextBtn" disabled>السؤال التالي <i class="fas fa-arrow-left"></i></button>
            </div>
        </div>
        
        <div class="category-legend">
            <div class="category-item">
                <div class="category-color" style="background-color: var(--alkali-metal)"></div>
                <span>فلزات قلوية</span>
            </div>
            <div class="category-item">
                <div class="category-color" style="background-color: var(--alkaline-earth)"></div>
                <span>قلويات ترابية</span>
            </div>
            <div class="category-item">
                <div class="category-color" style="background-color: var(--transition-metal)"></div>
                <span>فلزات انتقالية</span>
            </div>
            <div class="category-item">
                <div class="category-color" style="background-color: var(--post-transition)"></div>
                <span>ما بعد الانتقالية</span>
            </div>
            <div class="category-item">
                <div class="category-color" style="background-color: var(--metalloid)"></div>
                <span>أشباه الفلزات</span>
            </div>
            <div class="category-item">
                <div class="category-color" style="background-color: var(--nonmetal)"></div>
                <span>لافلزات</span>
            </div>
            <div class="category-item">
                <div class="category-color" style="background-color: var(--halogen)"></div>
                <span>هالوجينات</span>
            </div>
            <div class="category-item">
                <div class="category-color" style="background-color: var(--noble-gas)"></div>
                <span>غازات نبيلة</span>
            </div>
            <div class="category-item">
                <div class="category-color" style="background-color: var(--lanthanide)"></div>
                <span>لانثانيدات</span>
            </div>
            <div class="category-item">
                <div class="category-color" style="background-color: var(--actinide)"></div>
                <span>أكتينيدات</span>
            </div>
        </div>
        
        <h2 style="text-align: center; margin: 30px 0 15px; color: white;">الجدول الدوري للعناصر</h2>
        <div class="periodic-table-container">
            <div class="periodic-grid" id="periodicGrid"></div>
        </div>
        
        <footer>
            <div class="footer-content">
                <div class="footer-text">
                    <p>تصميم يوسف نده</p>
                </div>
            </div>
            <p>لعبة الجدول الدوري</p>
        </footer>
    </div>

    <!-- شات بوت - تم تعديل موقعه ليكون على اليمين -->
    <div class="chat-bot-container">
        <div class="chat-window" id="chatWindow">
            <div class="chat-header">
                <span>مساعد الجدول الدوري</span>
                <button class="chat-close" onclick="toggleChat()">×</button>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="message bot-message">
                    مرحباً! أنا مساعد الجدول الدوري. كيف يمكنني مساعدتك اليوم؟ اسألني عن أي عنصر كيميائي!
                </div>
                <div class="suggested-questions">
                    <button class="suggested-question" onclick="askSuggestedQuestion('ما هو رمز عنصر الذهب؟')">ما هو رمز عنصر الذهب؟</button>
                    <button class="suggested-question" onclick="askSuggestedQuestion('ما هو العدد الذري للأكسجين؟')">ما هو العدد الذري للأكسجين؟</button>
                    <button class="suggested-question" onclick="askSuggestedQuestion('ما هي مجموعة الصوديوم؟')">ما هي مجموعة الصوديوم؟</button>
                </div>
            </div>
            <div class="chat-input-container">
                <input type="text" class="chat-input" id="chatInput" placeholder="اكتب سؤالك هنا..." onkeypress="handleChatInput(event)">
                <button class="chat-send" onclick="sendMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
        <button class="chat-button" onclick="toggleChat()">
            <i class="fas fa-robot"></i>
        </button>
    </div>

    <!-- أيقونات وسائل التواصل الاجتماعي - تم تعديلها لتصبح ثابتة في الأسفل على اليمين -->
    <div class="social-icons-fixed">
        <a href="https://wa.me/201156116972" class="social-icon-fixed social-whatsapp" target="_blank" aria-label="واتساب">
            <i class="fab fa-whatsapp"></i>
        </a>
        <a href="https://www.facebook.com/share/1En5ESebgX/" class="social-icon-fixed social-facebook" target="_blank" aria-label="فيسبوك">
            <i class="fab fa-facebook"></i>
        </a>
    </div>
    <div class="overlay" id="overlay"></div>
    
    <div class="element-details" id="elementDetails">
        <button class="close-btn" onclick="closeElementDetails()">×</button>
        <div class="element-details-content">
            <h3 id="detailName"></h3>
            <div class="detail-row">
                <span class="detail-label">الرمز:</span>
                <span id="detailSymbol"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">العدد الذري:</span>
                <span id="detailNumber"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">المجموعة:</span>
                <span id="detailCategory"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">الكتلة الذرية:</span>
                <span id="detailMass"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">السنة التي اكتشف فيها:</span>
                <span id="detailYear"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">العالم المكتشف:</span>
                <span id="detailDiscoverer"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">الحالة (درجة حرارة الغرفة):</span>
                <span id="detailState"></span>
            </div>
        </div>
    </div>

    <div class="celebrate" id="celebrate"></div>
    <div class="floating-particles" id="particles"></div>

    <script>
        // بيانات العناصر الكيميائية (118 عنصر) مع معلومات العلماء المكتشفين
        const elements = [
            { number: 1, symbol: "H", name: "هيدروجين", category: "nonmetal", mass: "1.008", discovered: "1766", discoverer: "هنري كافيندش", state: "غاز", categoryNum: 6 },
            { number: 2, symbol: "He", name: "هيليوم", category: "noble-gas", mass: "4.0026", discovered: "1868", discoverer: "بيير جانسين ونورمان لوكير", state: "غاز", categoryNum: 8 },
            { number: 3, symbol: "Li", name: "ليثيوم", category: "alkali-metal", mass: "6.94", discovered: "1817", discoverer: "يوهان أوغست أرفيدسون", state: "صلب", categoryNum: 1 },
            { number: 4, symbol: "Be", name: "بريليوم", category: "alkaline-earth", mass: "9.0122", discovered: "1798", discoverer: "لويس نيكولا فوكولان", state: "صلب", categoryNum: 2 },
            { number: 5, symbol: "B", name: "بورون", category: "metalloid", mass: "10.81", discovered: "1808", discoverer: "جوزيف لويس غي-لوساك ولويس جاك تينارد", state: "صلب", categoryNum: 5 },
            { number: 6, symbol: "C", name: "كربون", category: "nonmetal", mass: "12.011", discovered: "العصور القديمة", discoverer: "معروف منذ العصور القديمة", state: "صلب", categoryNum: 6 },
            { number: 7, symbol: "N", name: "نيتروجين", category: "nonmetal", mass: "14.007", discovered: "1772", discoverer: "دانيال رذرفورد", state: "غاز", categoryNum: 6 },
            { number: 8, symbol: "O", name: "أكسجين", category: "nonmetal", mass: "15.999", discovered: "1774", discoverer: "جوزيف بريستلي وكارل فلهلم شيله", state: "غاز", categoryNum: 6 },
            { number: 9, symbol: "F", name: "فلور", category: "halogen", mass: "18.998", discovered: "1886", discoverer: "هنري مواسان", state: "غاز", categoryNum: 7 },
            { number: 10, symbol: "Ne", name: "نيون", category: "noble-gas", mass: "20.180", discovered: "1898", discoverer: "ويليام رامزي وموريس ترافرز", state: "غاز", categoryNum: 8 },
            { number: 11, symbol: "Na", name: "صوديوم", category: "alkali-metal", mass: "22.990", discovered: "1807", discoverer: "همفري ديفي", state: "صلب", categoryNum: 1 },
            { number: 12, symbol: "Mg", name: "مغنيسيوم", category: "alkaline-earth", mass: "24.305", discovered: "1755", discoverer: "جوزيف بلاك", state: "صلب", categoryNum: 2 },
            { number: 13, symbol: "Al", name: "ألومنيوم", category: "post-transition", mass: "26.982", discovered: "1825", discoverer: "هанز كريستيان أورستد", state: "صلب", categoryNum: 4 },
            { number: 14, symbol: "Si", name: "سيليكون", category: "metalloid", mass: "28.085", discovered: "1824", discoverer: "يونس ياكوب بيرسيليوس", state: "صلب", categoryNum: 5 },
            { number: 15, symbol: "P", name: "فوسفور", category: "nonmetal", mass: "30.974", discovered: "1669", discoverer: "هينغ براند", state: "صلب", categoryNum: 6 },
            { number: 16, symbol: "S", name: "كبريت", category: "nonmetal", mass: "32.06", discovered: "العصور القديمة", discoverer: "معروف منذ العصور القديمة", state: "صلب", categoryNum: 6 },
            { number: 17, symbol: "Cl", name: "كلور", category: "halogen", mass: "35.45", discovered: "1774", discoverer: "كارل فلهلم شيله", state: "غاز", categoryNum: 7 },
            { number: 18, symbol: "Ar", name: "أرجون", category: "noble-gas", mass: "39.948", discovered: "1894", discoverer: "لورد ريليه وويليام رامزي", state: "غاز", categoryNum: 8 },
            { number: 19, symbol: "K", name: "بوتاسيوم", category: "alkali-metal", mass: "39.098", discovered: "1807", discoverer: "همفري ديفي", state: "صلب", categoryNum: 1 },
            { number: 20, symbol: "Ca", name: "كالسيوم", category: "alkaline-earth", mass: "40.078", discovered: "1808", discoverer: "همفري ديفي", state: "صلب", categoryNum: 2 },
            { number: 21, symbol: "Sc", name: "سكانديوم", category: "transition-metal", mass: "44.956", discovered: "1879", discoverer: "لارس فريدريك نيلسون", state: "صلب", categoryNum: 3 },
            { number: 22, symbol: "Ti", name: "تيتانيوم", category: "transition-metal", mass: "47.867", discovered: "1791", discoverer: "ويليام جريجور", state: "صلب", categoryNum: 3 },
            { number: 23, symbol: "V", name: "فاناديوم", category: "transition-metal", mass: "50.942", discovered: "1801", discoverer: "أندريس مانويل ديل ريو", state: "صلب", categoryNum: 3 },
            { number: 24, symbol: "Cr", name: "كروم", category: "transition-metal", mass: "51.996", discovered: "1797", discoverer: "لويس نيكولا فوكولان", state: "صلب", categoryNum: 3 },
            { number: 25, symbol: "Mn", name: "منغنيز", category: "transition-metal", mass: "54.938", discovered: "1774", discoverer: "يوهان غوتليب غان", state: "صلب", categoryNum: 3 },
            { number: 26, symbol: "Fe", name: "حديد", category: "transition-metal", mass: "55.845", discovered: "العصور القديمة", discoverer: "معروف منذ العصور القديمة", state: "صلب", categoryNum: 3 },
            { number: 27, symbol: "Co", name: "كوبالت", category: "transition-metal", mass: "58.933", discovered: "1735", discoverer: "جورج براندت", state: "صلب", categoryNum: 3 },
            { number: 28, symbol: "Ni", name: "نيكل", category: "transition-metal", mass: "58.693", discovered: "1751", discoverer: "أكسيل فريدريك كرونستيدت", state: "صلب", categoryNum: 3 },
            { number: 29, symbol: "Cu", name: "نحاس", category: "transition-metal", mass: "63.546", discovered: "العصور القديمة", discoverer: "معروف منذ العصور القديمة", state: "صلب", categoryNum: 3 },
            { number: 30, symbol: "Zn", name: "زنك", category: "transition-metal", mass: "65.38", discovered: "1746", discoverer: "أندرياس سيغيسموند مارغراف", state: "صلب", categoryNum: 3 },
            { number: 31, symbol: "Ga", name: "غاليوم", category: "post-transition", mass: "69.723", discovered: "1875", discoverer: "بول إميل ليكوك دي بواسبودران", state: "صلب", categoryNum: 4 },
            { number: 32, symbol: "Ge", name: "جرمانيوم", category: "metalloid", mass: "72.630", discovered: "1886", discoverer: "كليمنس وينكلر", state: "صلب", categoryNum: 5 },
            { number: 33, symbol: "As", name: "زرنيخ", category: "metalloid", mass: "74.922", discovered: "العصور القديمة", discoverer: "معروف منذ العصور القديمة", state: "صلب", categoryNum: 5 },
            { number: 34, symbol: "Se", name: "سيلينيوم", category: "nonmetal", mass: "78.971", discovered: "1817", discoverer: "يونس ياكوب بيرسيليوس", state: "صلب", categoryNum: 6 },
            { number: 35, symbol: "Br", name: "بروم", category: "halogen", mass: "79.904", discovered: "1826", discoverer: "أنطوان جيروم بالارد", state: "سائل", categoryNum: 7 },
            { number: 36, symbol: "Kr", name: "كريبتون", category: "noble-gas", mass: "83.798", discovered: "1898", discoverer: "ويليام رامزي وموريس ترافرز", state: "غاز", categoryNum: 8 },
            { number: 37, symbol: "Rb", name: "روبيديوم", category: "alkali-metal", mass: "85.468", discovered: "1861", discoverer: "روبرت بنسن وغوستاف كيرشهوف", state: "صلب", categoryNum: 1 },
            { number: 38, symbol: "Sr", name: "سترونتيوم", category: "alkaline-earth", mass: "87.62", discovered: "1790", discoverer: "أدير كروفورد", state: "صلب", categoryNum: 2 },
            { number: 39, symbol: "Y", name: "إتريوم", category: "transition-metal", mass: "88.906", discovered: "1794", discoverer: "يوهان جادولين", state: "صلب", categoryNum: 3 },
            { number: 40, symbol: "Zr", name: "زركونيوم", category: "transition-metal", mass: "91.224", discovered: "1789", discoverer: "مارتن كلابروت", state: "صلب", categoryNum: 3 },
            { number: 41, symbol: "Nb", name: "نيوبيوم", category: "transition-metal", mass: "92.906", discovered: "1801", discoverer: "تشارلز هاتشيت", state: "صلب", categoryNum: 3 },
            { number: 42, symbol: "Mo", name: "موليبدينوم", category: "transition-metal", mass: "95.95", discovered: "1778", discoverer: "كارل فلهلم شيله", state: "صلب", categoryNum: 3 },
            { number: 43, symbol: "Tc", name: "تكنيتيوم", category: "transition-metal", mass: "98", discovered: "1937", discoverer: "كارلو بيرييه وإميليو سيجري", state: "صلب", categoryNum: 3 },
            { number: 44, symbol: "Ru", name: "روثينيوم", category: "transition-metal", mass: "101.07", discovered: "1844", discoverer: "كارل إرنست كلاوس", state: "صلب", categoryNum: 3 },
            { number: 45, symbol: "Rh", name: "روديوم", category: "transition-metal", mass: "102.91", discovered: "1803", discoverer: "ويليام هايد ولاستون", state: "صلب", categoryNum: 3 },
            { number: 46, symbol: "Pd", name: "بالاديوم", category: "transition-metal", mass: "106.42", discovered: "1803", discoverer: "ويليام هايد ولاستون", state: "صلب", categoryNum: 3 },
            { number: 47, symbol: "Ag", name: "فضة", category: "transition-metal", mass: "107.87", discovered: "العصور القديمة", discoverer: "معروف منذ العصور القديمة", state: "صلب", categoryNum: 3 },
            { number: 48, symbol: "Cd", name: "كادميوم", category: "transition-metal", mass: "112.41", discovered: "1817", discoverer: "فريدريش سترومير", state: "صلب", categoryNum: 3 },
            { number: 49, symbol: "In", name: "إنديوم", category: "post-transition", mass: "114.82", discovered: "1863", discoverer: "فرديناند رايخ وهيرونيموس تيودور ريشتر", state: "صلب", categoryNum: 4 },
            { number: 50, symbol: "Sn", name: "قصدير", category: "post-transition", mass: "118.71", discovered: "العصور القديمة", discoverer: "معروف منذ العصور القديمة", state: "صلب", categoryNum: 4 },
            { number: 51, symbol: "Sb", name: "إثمد", category: "metalloid", mass: "121.76", discovered: "العصور القديمة", discoverer: "معروف منذ العصور القديمة", state: "صلب", categoryNum: 5 },
            { number: 52, symbol: "Te", name: "تيلوريوم", category: "metalloid", mass: "127.60", discovered: "1782", discoverer: "فرانز جوزيف مولر فون رايشنشتاين", state: "صلب", categoryNum: 5 },
            { number: 53, symbol: "I", name: "يود", category: "halogen", mass: "126.90", discovered: "1811", discoverer: "برنار كورتوا", state: "صلب", categoryNum: 7 },
            { number: 54, symbol: "Xe", name: "زينون", category: "noble-gas", mass: "131.29", discovered: "1898", discoverer: "ويليام رامزي وموريس ترافرز", state: "غاز", categoryNum: 8 },
            { number: 55, symbol: "Cs", name: "سيزيوم", category: "alkali-metal", mass: "132.91", discovered: "1860", discoverer: "روبرت بنسن وغوستاف كирشهوف", state: "صلب", categoryNum: 1 },
            { number: 56, symbol: "Ba", name: "باريوم", category: "alkaline-earth", mass: "137.33", discovered: "1808", discoverer: "همفري ديفي", state: "صلب", categoryNum: 2 },
            { number: 57, symbol: "La", name: "لانثانوم", category: "lanthanide", mass: "138.91", discovered: "1839", discoverer: "كارل جوستاف موساندر", state: "صلب", categoryNum: 9 },
            { number: 58, symbol: "Ce", name: "سيريوم", category: "lanthanide", mass: "140.12", discovered: "1803", discoverer: "مارتن كلابروت ويونس ياكوب بيرسيليوس وويلهلم هسينجر", state: "صلب", categoryNum: 9 },
            { number: 59, symbol: "Pr", name: "براسيوديميوم", category: "lanthanide", mass: "140.91", discovered: "1885", discoverer: "كارل أوير فون ويلسباخ", state: "صلب", categoryNum: 9 },
            { number: 60, symbol: "Nd", name: "نيوديميوم", category: "lanthanide", mass: "144.24", discovered: "1885", discoverer: "كارل أوير فون ويلسباخ", state: "صلب", categoryNum: 9 },
            { number: 61, symbol: "Pm", name: "بروميثيوم", category: "lanthanide", mass: "145", discovered: "1945", discoverer: "جاكوب أ. مارينسكي ولورنس إ. غليندينين وتشارلز د. كوريل", state: "صلب", categoryNum: 9 },
            { number: 62, symbol: "Sm", name: "ساماريوم", category: "lanthanide", mass: "150.36", discovered: "1879", discoverer: "بول إميل ليكوك دي بواسبودران", state: "صلب", categoryNum: 9 },
            { number: 63, symbol: "Eu", name: "يوروبيوم", category: "lanthanide", mass: "151.96", discovered: "1901", discoverer: "يوجين أناتولي ديماركاي", state: "صلب", categoryNum: 9 },
            { number: 64, symbol: "Gd", name: "غادولينيوم", category: "lanthanide", mass: "157.25", discovered: "1880", discoverer: "جان تشارلز جاليسارد دي مارينياك", state: "صلب", categoryNum: 9 },
            { number: 65, symbol: "Tb", name: "تيربيوم", category: "lanthanide", mass: "158.93", discovered: "1843", discoverer: "كارل جوستاف موساندر", state: "صلب", categoryNum: 9 },
            { number: 66, symbol: "Dy", name: "ديسبروسيوم", category: "lanthanide", mass: "162.50", discovered: "1886", discoverer: "بول إميل ليكوك دي بواسبودران", state: "صلب", categoryNum: 9 },
            { number: 67, symbol: "Ho", name: "هولميوم", category: "lanthanide", mass: "164.93", discovered: "1878", discoverer: "مارك ديلافونتاين وجاك لويس سوريه", state: "صلب", categoryNum: 9 },
            { number: 68, symbol: "Er", name: "إربيوم", category: "lanthanide", mass: "167.26", discovered: "1843", discoverer: "كارل جوستاف موساندر", state: "صلب", categoryNum: 9 },
            { number: 69, symbol: "Tm", name: "ثوليوم", category: "lanthanide", mass: "168.93", discovered: "1879", discoverer: "بير تيودور كليفه", state: "صلب", categoryNum: 9 },
            { number: 70, symbol: "Yb", name: "إتيربيوم", category: "lanthanide", mass: "173.05", discovered: "1878", discoverer: "جان تشارلز جاليسارد دي مارينياك", state: "صلب", categoryNum: 9 },
            { number: 71, symbol: "Lu", name: "لوتيتيوم", category: "lanthanide", mass: "174.97", discovered: "1907", discoverer: "جورجيس أوربين وكارل أوير فون ويلسباخ", state: "صلب", categoryNum: 9 },
            { number: 72, symbol: "Hf", name: "هافنيوم", category: "transition-metal", mass: "178.49", discovered: "1923", discoverer: "ديرك كوستر وجورج فون هيفسي", state: "صلب", categoryNum: 3 },
            { number: 73, symbol: "Ta", name: "تانتالوم", category: "transition-metal", mass: "180.95", discovered: "1802", discoverer: "أندرس غوستاف إكيبيرغ", state: "صلب", categoryNum: 3 },
            { number: 74, symbol: "W", name: "تنجستن", category: "transition-metal", mass: "183.84", discovered: "1783", discoverer: "خوان خوسيه وإفايو إلخويار", state: "صلب", categoryNum: 3 },
            { number: 75, symbol: "Re", name: "رينيوم", category: "transition-metal", mass: "186.21", discovered: "1925", discoverer: "والتر نوداك وإيدا تاكي وفريتز نوداك", state: "صلب", categoryNum: 3 },
            { number: 76, symbol: "Os", name: "أوزميوم", category: "transition-metal", mass: "190.23", discovered: "1803", discoverer: "سميثسون تينانت", state: "صلب", categoryNum: 3 },
            { number: 77, symbol: "Ir", name: "إريديوم", category: "transition-metal", mass: "192.22", discovered: "1803", discoverer: "سميثسون تينانت", state: "صلب", categoryNum: 3 },
            { number: 78, symbol: "Pt", name: "بلاتين", category: "transition-metal", mass: "195.08", discovered: "1735", discoverer: "أنطونيو دي أولوا", state: "صلب", categoryNum: 3 },
            { number: 79, symbol: "Au", name: "ذهب", category: "transition-metal", mass: "196.97", discovered: "العصور القديمة", discoverer: "معروف منذ العصور القديمة", state: "صلب", categoryNum: 3 },
            { number: 80, symbol: "Hg", name: "زئبق", category: "transition-metal", mass: "200.59", discovered: "العصور القديمة", discoverer: "معروف منذ العصور القديمة", state: "سائل", categoryNum: 3 },
            { number: 81, symbol: "Tl", name: "ثاليوم", category: "post-transition", mass: "204.38", discovered: "1861", discoverer: "ويليام كرو克斯", state: "صلب", categoryNum: 4 },
            { number: 82, symbol: "Pb", name: "رصاص", category: "post-transition", mass: "207.2", discovered: "العصور القديمة", discoverer: "معروف منذ العصور القديمة", state: "صلب", categoryNum: 4 },
            { number: 83, symbol: "Bi", name: "بزموت", category: "post-transition", mass: "208.98", discovered: "1753", discoverer: "كلود جيوفروي الأصغر", state: "صلب", categoryNum: 4 },
            { number: 84, symbol: "Po", name: "بولونيوم", category: "post-transition", mass: "209", discovered: "1898", discoverer: "بيار كوري وماري كوري", state: "صلب", categoryNum: 4 },
            { number: 85, symbol: "At", name: "أستاتين", category: "halogen", mass: "210", discovered: "1940", discoverer: "ديل ر. كورسون وكينيث روس ماكينزي وإميليو سيجري", state: "صلب", categoryNum: 7 },
            { number: 86, symbol: "Rn", name: "رادون", category: "noble-gas", mass: "222", discovered: "1900", discoverer: "فريدريش إرنست دورن", state: "غاز", categoryNum: 8 },
            { number: 87, symbol: "Fr", name: "فرانسيوم", category: "alkali-metal", mass: "223", discovered: "1939", discoverer: "مارغريت بيري", state: "صلب", categoryNum: 1 },
            { number: 88, symbol: "Ra", name: "راديوم", category: "alkaline-earth", mass: "226", discovered: "1898", discoverer: "بيار كوري وماري كوري", state: "صلب", categoryNum: 2 },
            { number: 89, symbol: "Ac", name: "أكتينيوم", category: "actinide", mass: "227", discovered: "1899", discoverer: "أندريه لويس ديبيرن", state: "صلب", categoryNum: 10 },
            { number: 90, symbol: "Th", name: "ثوريوم", category: "actinide", mass: "232.04", discovered: "1829", discoverer: "يونس ياكوب بيرسيليوس", state: "صلب", categoryNum: 10 },
            { number: 91, symbol: "Pa", name: "بروتكتينيوم", category: "actinide", mass: "231.04", discovered: "1913", discoverer: "كازيمير فاجان وأوتو هاهن", state: "صلب", categoryNum: 10 },
            { number: 92, symbol: "U", name: "يورانيوم", category: "actinide", mass: "238.03", discovered: "1789", discoverer: "مارتن كلابروت", state: "صلب", categoryNum: 10 },
            { number: 93, symbol: "Np", name: "نيبتونيوم", category: "actinide", mass: "237", discovered: "1940", discoverer: "إدوين ماكميلان وفيليب أبيلسون", state: "صلب", categoryNum: 10 },
            { number: 94, symbol: "Pu", name: "بلوتونيوم", category: "actinide", mass: "244", discovered: "1940", discoverer: "غلين تي سيبورغ وإدوين ماكميلان وجوزيف كينيدي وأرثر وال", state: "صلب", categoryNum: 10 },
            { number: 95, symbol: "Am", name: "أمريسيوم", category: "actinide", mass: "243", discovered: "1944", discoverer: "غلين تي سيبورغ ورفاقه", state: "صلب", categoryNum: 10 },
            { number: 96, symbol: "Cm", name: "كوريوم", category: "actinide", mass: "247", discovered: "1944", discoverer: "غلين تي سيبورغ ورفاقه", state: "صلب", categoryNum: 10 },
            { number: 97, symbol: "Bk", name: "بركليوم", category: "actinide", mass: "247", discovered: "1949", discoverer: "غلين تي سيبورغ وستانلي جيرالد تومسون وألبرت غيورغو", state: "صلب", categoryNum: 10 },
            { number: 98, symbol: "Cf", name: "كاليفورنيوم", category: "actinide", mass: "251", discovered: "1950", discoverer: "غلين تي سيبورغ وستانلي جيرالد تومسون وكينيث ستريت الابن وألبرت غيорغو", state: "صلب", categoryNum: 10 },
            { number: 99, symbol: "Es", name: "آينشتاينيوم", category: "actinide", mass: "252", discovered: "1952", discoverer: "ألبرت غيورغو ورفاقه", state: "صلب", categoryNum: 10 },
            { number: 100, symbol: "Fm", name: "فيرميوم", category: "actinide", mass: "257", discovered: "1952", discoverer: "ألبرت غيورغو ورفاقه", state: "صلب", categoryNum: 10 },
            { number: 101, symbol: "Md", name: "مندليفيوم", category: "actinide", mass: "258", discovered: "1955", discoverer: "غلين تي سيبورغ وستانلي جيرالد تومسون وألبرت غيورغو وبرنارد ج. هارفي وغريغوري ر. شوبين", state: "صلب", categoryNum: 10 },
            { number: 102, symbol: "No", name: "نوبليوم", category: "actinide", mass: "259", discovered: "1958", discoverer: "ألبرت غيورغو وغلين تي سيبورغ وتوربيورن سيكيلاند وجون ر. والتون", state: "صلب", categoryNum: 10 },
            { number: 103, symbol: "Lr", name: "لورنسيوم", category: "actinide", mass: "266", discovered: "1961", discoverer: "ألبرت غيورغو وتوربيورن سيكيلاند وأل مونش وروبرت م. لاتيمر", state: "صلب", categoryNum: 10 },
            { number: 104, symbol: "Rf", name: "رذرفورديوم", category: "transition-metal", mass: "267", discovered: "1964", discoverer: "المعهد المشترك للبحوث النووية في دوبنا", state: "صلب", categoryNum: 3 },
            { number: 105, symbol: "Db", name: "دوبنيوم", category: "transition-metal", mass: "268", discovered: "1967", discoverer: "المعهد المشترك للبحوث النووية في دوبنا", state: "صلب", categoryNum: 3 },
            { number: 106, symbol: "Sg", name: "سيبورغيوم", category: "transition-metal", mass: "269", discovered: "1974", discoverer: "المعهد المشترك للبحوث النووية في دوبنا", state: "صلب", categoryNum: 3 },
            { number: 107, symbol: "Bh", name: "بوريوم", category: "transition-metal", mass: "270", discovered: "1981", discoverer: "بيتر أرمبروستر وغوتفريد مونزينبرغ", state: "صلب", categoryNum: 3 },
            { number: 108, symbol: "Hs", name: "هاسيوم", category: "transition-metal", mass: "277", discovered: "1984", discoverer: "بيتر أرمبروستر وغوتفريد مونزينبرغ", state: "صلب", categoryNum: 3 },
            { number: 109, symbol: "Mt", name: "مايتنريوم", category: "transition-metal", mass: "278", discovered: "1982", discoverer: "بيتر أرمبروستر وغوتفريد مونزينبرغ", state: "صلب", categoryNum: 3 },
            { number: 110, symbol: "Ds", name: "دارمشتاتيوم", category: "transition-metal", mass: "281", discovered: "1994", discoverer: "سيغورد هوفمان ورفاقه", state: "صلب", categoryNum: 3 },
            { number: 111, symbol: "Rg", name: "رونتجينيوم", category: "transition-metal", mass: "282", discovered: "1994", discoverer: "سيغورد هوفمان ورفاقه", state: "صلب", categoryNum: 3 },
            { number: 112, symbol: "Cn", name: "كوبرنيسيوم", category: "transition-metal", mass: "285", discovered: "1996", discoverer: "سيغورد هوفمان ورفاقه", state: "غير معروف", categoryNum: 3 },
            { number: 113, symbol: "Nh", name: "نيهونيوم", category: "post-transition", mass: "286", discovered: "2003", discoverer: "المعهد المشترك للبحوث النووية في دوبنا ومعهد لورنس ليفرمور الوطني", state: "غير معروف", categoryNum: 4 },
            { number: 114, symbol: "Fl", name: "فليروفيوم", category: "post-transition", mass: "289", discovered: "1998", discoverer: "المعهد المشترك للبحوث النووية في دوبنا ومعهد لورنس ليفرمور الوطني", state: "غير معروف", categoryNum: 4 },
            { number: 115, symbol: "Mc", name: "موسكوفيوم", category: "post-transition", mass: "290", discovered: "2003", discoverer: "المعهد المشترك للبحوث النووية في دوبنا ومعهد لورنس ليفرمور الوطني", state: "غير معروف", categoryNum: 4 },
            { number: 116, symbol: "Lv", name: "ليفرموريوم", category: "post-transition", mass: "293", discovered: "2000", discoverer: "المعهد المشترك للبحوث النووية في دوبنا ومعهد لورنس ليفرمور الوطني", state: "غير معروف", categoryNum: 4 },
            { number: 117, symbol: "Ts", name: "تينيسين", category: "halogen", mass: "294", discovered: "2010", discoverer: "المعهد المشترك للبحوث النووية في دوبنا ومعهد لورنس ليفرمور الوطني", state: "غير معروف", categoryNum: 7 },
            { number: 118, symbol: "Og", name: "أوغانيسون", category: "noble-gas", mass: "294", discovered: "2002", discoverer: "المعهد المشترك للبحوث النووية في دوبنا ومعهد لورنس ليفرمور الوطني", state: "غير معروف", categoryNum: 8 }
        ];
        
        let currentGameType = "";
        let currentQuestion = {};
        let score = 0;
        let timeLeft = 60;
        let timer;
        let totalQuestions = 15;
        let currentQuestionIndex = 0;
        let soundEnabled = true;
        let darkMode = false;
        
        // تهيئة الجسيمات العائمة
        function initParticles() {
            const particles = document.getElementById('particles');
            particles.innerHTML = '';
            
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const size = Math.random() * 8 + 2;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                
                particle.style.left = `${Math.random() * 100}vw`;
                particle.style.top = `${Math.random() * 100}vh`;
                
                particle.style.background = `rgba(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 0.5})`;
                
                particle.style.animationDuration = `${Math.random() * 10 + 10}s`;
                particle.style.animationDelay = `${Math.random() * 5}s`;
                
                particles.appendChild(particle);
            }
        }
        
        // تهيئة الجدول الدوري بشكل منظم
        function initPeriodicTable() {
            const grid = document.getElementById('periodicGrid');
            grid.innerHTML = '';
            
            // تحديد مواقع العناصر في الجدول الدوري
            const elementPositions = {
                1: {row: 1, col: 1},
                2: {row: 1, col: 18},
                3: {row: 2, col: 1},
                4: {row: 2, col: 2},
                5: {row: 2, col: 13},
                6: {row: 2, col: 14},
                7: {row: 2, col: 15},
                8: {row: 2, col: 16},
                9: {row: 2, col: 17},
                10: {row: 2, col: 18},
                11: {row: 3, col: 1},
                12: {row: 3, col: 2},
                13: {row: 3, col: 13},
                14: {row: 3, col: 14},
                15: {row: 3, col: 15},
                16: {row: 3, col: 16},
                17: {row: 3, col: 17},
                18: {row: 3, col: 18},
                19: {row: 4, col: 1},
                20: {row: 4, col: 2},
                21: {row: 4, col: 3},
                22: {row: 4, col: 4},
                23: {row: 4, col: 5},
                24: {row: 4, col: 6},
                25: {row: 4, col: 7},
                26: {row: 4, col: 8},
                27: {row: 4, col: 9},
                28: {row: 4, col: 10},
                29: {row: 4, col: 11},
                30: {row: 4, col: 12},
                31: {row: 4, col: 13},
                32: {row: 4, col: 14},
                33: {row: 4, col: 15},
                34: {row: 4, col: 16},
                35: {row: 4, col: 17},
                36: {row: 4, col: 18},
                37: {row: 5, col: 1},
                38: {row: 5, col: 2},
                39: {row: 5, col: 3},
                40: {row: 5, col: 4},
                41: {row: 5, col: 5},
                42: {row: 5, col: 6},
                43: {row: 5, col: 7},
                44: {row: 5, col: 8},
                45: {row: 5, col: 9},
                46: {row: 5, col: 10},
                47: {row: 5, col: 11},
                48: {row: 5, col: 12},
                49: {row: 5, col: 13},
                50: {row: 5, col: 14},
                51: {row: 5, col: 15},
                52: {row: 5, col: 16},
                53: {row: 5, col: 17},
                54: {row: 5, col: 18},
                55: {row: 6, col: 1},
                56: {row: 6, col: 2},
                57: {row: 8, col: 3},
                58: {row: 8, col: 4},
                59: {row: 8, col: 5},
                60: {row: 8, col: 6},
                61: {row: 8, col: 7},
                62: {row: 8, col: 8},
                63: {row: 8, col: 9},
                64: {row: 8, col: 10},
                65: {row: 8, col: 11},
                66: {row: 8, col: 12},
                67: {row: 8, col: 13},
                68: {row: 8, col: 14},
                69: {row: 8, col: 15},
                70: {row: 8, col: 16},
                71: {row: 8, col: 17},
                72: {row: 6, col: 4},
                73: {row: 6, col: 5},
                74: {row: 6, col: 6},
                75: {row: 6, col: 7},
                76: {row: 6, col: 8},
                77: {row: 6, col: 9},
                78: {row: 6, col: 10},
                79: {row: 6, col: 11},
                80: {row: 6, col: 12},
                81: {row: 6, col: 13},
                82: {row: 6, col: 14},
                83: {row: 6, col: 15},
                84: {row: 6, col: 16},
                85: {row: 6, col: 17},
                86: {row: 6, col: 18},
                87: {row: 7, col: 1},
                88: {row: 7, col: 2},
                89: {row: 9, col: 3},
                90: {row: 9, col: 4},
                91: {row: 9, col: 5},
                92: {row: 9, col: 6},
                93: {row: 9, col: 7},
                94: {row: 9, col: 8},
                95: {row: 9, col: 9},
                96: {row: 9, col: 10},
                97: {row: 9, col: 11},
                98: {row: 9, col: 12},
                99: {row: 9, col: 13},
                100: {row: 9, col: 14},
                101: {row: 9, col: 15},
                102: {row: 9, col: 16},
                103: {row: 9, col: 17},
                104: {row: 7, col: 4},
                105: {row: 7, col: 5},
                106: {row: 7, col: 6},
                107: {row: 7, col: 7},
                108: {row: 7, col: 8},
                109: {row: 7, col: 9},
                110: {row: 7, col: 10},
                111: {row: 7, col: 11},
                112: {row: 7, col: 12},
                113: {row: 7, col: 13},
                114: {row: 7, col: 14},
                115: {row: 7, col: 15},
                116: {row: 7, col: 16},
                117: {row: 7, col: 17},
                118: {row: 7, col: 18}
            };
            
            // إنشاء 9 صفوف و 18 عمود
            for (let row = 1; row <= 9; row++) {
                for (let col = 1; col <= 18; col++) {
                    const cell = document.createElement('div');
                    
                    // البحث عن العنصر الذي ينتمي لهذه الخلية
                    let element = null;
                    for (const [num, pos] of Object.entries(elementPositions)) {
                        if (pos.row === row && pos.col === col) {
                            element = elements.find(el => el.number === parseInt(num));
                            break;
                        }
                    }
                    
                    if (element) {
                        cell.className = `grid-element element-category-${element.categoryNum}`;
                        cell.innerHTML = `
                            <div class="number">${element.number}</div>
                            <div class="symbol">${element.symbol}</div>
                            <div class="name">${element.name}</div>
                        `;
                        cell.onclick = () => showElementDetails(element);
                        grid.appendChild(cell);
                    } else {
                        // خلايا فارغة للفجوات في الجدول الدوري
                        if (!((row === 6 && col === 3) || (row === 7 && col === 3) || (row > 6 && col > 3 && col < 13))) {
                            cell.className = 'grid-gap';
                            grid.appendChild(cell);
                        } else {
                            // مساحة للانثانيدات والأكتينيدات
                            cell.className = 'empty-cell';
                            grid.appendChild(cell);
                        }
                    }
                }
            }
        }
        
        // عرض تفاصيل العنصر
        function showElementDetails(element) {
            document.getElementById('detailName').textContent = element.name;
            document.getElementById('detailSymbol').textContent = element.symbol;
            document.getElementById('detailNumber').textContent = element.number;
            document.getElementById('detailCategory').textContent = getCategoryName(element.category);
            document.getElementById('detailMass').textContent = element.mass;
            document.getElementById('detailYear').textContent = element.discovered;
            document.getElementById('detailDiscoverer').textContent = element.discoverer;
            document.getElementById('detailState').textContent = element.state;
            
            document.getElementById('elementDetails').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }
        
        // إغلاق تفاصيل العنصر
        function closeElementDetails() {
            document.getElementById('elementDetails').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }
        
        // الحصول على اسم المجموعة بالعربية
        function getCategoryName(category) {
            const categories = {
                'nonmetal': 'لافلز',
                'noble-gas': 'غاز خامل',
                'alkali-metal': 'فلز قلوي',
                'alkaline-earth': 'فلز قلوي ترابي',
                'metalloid': 'شبه فلز',
                'halogen': 'هالوجين',
                'metal': 'فلز',
                'transition-metal': 'فلز انتقالي',
                'lanthanide': 'لانثانيد',
                'actinide': 'أكتينيد',
                'post-transition': 'ما بعد الانتقال',
                'unknown': 'غير معروف'
            };
            return categories[category] || category;
        }
        
        // بدء اللعبة
        function startGame(gameType) {
            currentGameType = gameType;
            score = 0;
            timeLeft = 60;
            currentQuestionIndex = 0;
            
            document.getElementById('score').textContent = score;
            document.getElementById('timer').textContent = timeLeft;
            document.getElementById('progress').style.width = '0%';
            document.getElementById('answerFeedback').textContent = '';
            document.getElementById('answerFeedback').className = 'answer-feedback';
            
            // إظهار منطقة اللعبة وإخفاء خيارات الألعاب
            document.getElementById('gameArea').style.display = 'block';
            document.querySelector('.game-selection').style.display = 'none';
            
            // بدء المؤقت
            clearInterval(timer);
            timer = setInterval(updateTimer, 1000);
            
            // إنشاء السؤال الأول
            nextQuestion();
        }
        
        // تحديث المؤقت
        function updateTimer() {
            timeLeft--;
            document.getElementById('timer').textContent = timeLeft;
            
            if (timeLeft <= 0) {
                endGame();
            }
        }
        
        // إنشاء سؤال جديد
        function nextQuestion() {
            document.getElementById('nextBtn').disabled = true;
            document.getElementById('answerFeedback').textContent = '';
            document.getElementById('answerFeedback').className = 'answer-feedback';
            
            currentQuestionIndex++;
            
            // تحديث شريط التقدم
            const progressPercent = (currentQuestionIndex / totalQuestions) * 100;
            document.getElementById('progress').style.width = `${progressPercent}%`;
            
            const questionElement = document.getElementById('question');
            const optionsElement = document.getElementById('options');
            optionsElement.innerHTML = '';
            
            // اختيار عنصر عشوائي للسؤال
            const randomElement = elements[Math.floor(Math.random() * elements.length)];
            
            // إنشاء السؤال بناءً على نوع اللعبة
            switch(currentGameType) {
                case 'symbolToName':
                    questionElement.textContent = `ما هو اسم العنصر الذي رمزه ${randomElement.symbol}؟`;
                    currentQuestion = {
                        correctAnswer: randomElement.name,
                        options: generateOptions(randomElement.name, 'name'),
                        element: randomElement
                    };
                    break;
                    
                case 'nameToSymbol':
                    questionElement.textContent = `ما هو رمز العنصر ${randomElement.name}؟`;
                    currentQuestion = {
                        correctAnswer: randomElement.symbol,
                        options: generateOptions(randomElement.symbol, 'symbol'),
                        element: randomElement
                    };
                    break;
                    
                case 'numberToElement':
                    questionElement.textContent = `ما هو العنصر الذي عدده الذري ${randomElement.number}؟`;
                    currentQuestion = {
                        correctAnswer: randomElement.name,
                        options: generateOptions(randomElement.name, 'name'),
                        element: randomElement
                    };
                    break;
            }
            
            // عرض الخيارات
            currentQuestion.options.forEach(option => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.textContent = option;
                optionDiv.onclick = function() {
                    checkAnswer(this);
                };
                optionsElement.appendChild(optionDiv);
            });
            
            if (currentQuestionIndex >= totalQuestions) {
                endGame();
            }
        }
        
        // توليد خيارات متعددة (الإجابة الصحيحة + 3 خيارات خاطئة)
        function generateOptions(correctAnswer, type) {
            const options = [correctAnswer];
            
            // إضافة خيارات خاطئة
            while (options.length < 4) {
                let randomOption;
                if (type === 'name') {
                    randomOption = elements[Math.floor(Math.random() * elements.length)].name;
                } else {
                    randomOption = elements[Math.floor(Math.random() * elements.length)].symbol;
                }
                
                if (!options.includes(randomOption)) {
                    options.push(randomOption);
                }
            }
            
            // خلط الخيارات عشوائياً
            return shuffleArray(options);
        }
        
        // خلط مصفوفة عشوائياً
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        // تشغيل صوت
        function playSound(isCorrect) {
            if (!soundEnabled) return;
            
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                if (isCorrect) {
                    // صوت "برافو" للإجابة الصحيحة
                    oscillator.type = 'sine';
                    oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
                    oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1); // E5
                    oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2); // G5
                    
                    gainNode.gain.setValueAtTime(0.5, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                    
                    oscillator.start();
                    oscillator.stop(audioContext.currentTime + 0.5);
                    
                    // تشغيل صوت "برافو" بعد النغمة
                    setTimeout(() => {
                        const speech = new SpeechSynthesisUtterance("برافو! إجابة صحيحة");
                        speech.lang = 'ar-SA';
                        speech.rate = 1.0;
                        speech.pitch = 1.2;
                        window.speechSynthesis.speak(speech);
                    }, 300);
                } else {
                    // صوت "غلط تكوتن" للإجابة الخاطئة
                    oscillator.type = 'sawtooth';
                    oscillator.frequency.setValueAtTime(196.00, audioContext.currentTime); // G3
                    oscillator.frequency.setValueAtTime(174.61, audioContext.currentTime + 0.1); // F3
                    oscillator.frequency.setValueAtTime(155.56, audioContext.currentTime + 0.2); // D#3
                    
                    gainNode.gain.setValueAtTime(0.5, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                    
                    oscillator.start();
                    oscillator.stop(audioContext.currentTime + 0.5);
                    
                    // تشغيل صوت "غلط تكوتن" بعد النغمة
                    setTimeout(() => {
                        const speech = new SpeechSynthesisUtterance("غلط! حاول مرة أخرى");
                        speech.lang = 'ar-SA';
                        speech.rate = 0.9;
                        speech.pitch = 0.8;
                        window.speechSynthesis.speak(speech);
                    }, 300);
                }
            } catch (e) {
                console.log("لم يتمكن المتصفح من تشغيل الصوت: ", e);
            }
        }
        
        // التحقق من الإجابة
        function checkAnswer(selectedOption) {
            const options = document.querySelectorAll('.option');
            const selectedAnswer = selectedOption.textContent;
            const feedbackElement = document.getElementById('answerFeedback');
            
            options.forEach(option => {
                if (option.textContent === currentQuestion.correctAnswer) {
                    option.classList.add('correct');
                }
                
                if (option.textContent === selectedAnswer && selectedAnswer !== currentQuestion.correctAnswer) {
                    option.classList.add('wrong');
                }
                
                option.onclick = null; // تعطيل النقر على الخيارات بعد الاختيار
            });
            
            if (selectedAnswer === currentQuestion.correctAnswer) {
                score++;
                document.getElementById('score').textContent = score;
                playSound(true); // صوت الإجابة الصحيحة
                feedbackElement.textContent = 'إجابة صحيحة! أحسنت!';
                feedbackElement.className = 'answer-feedback correct-answer';
                
                if (score % 5 === 0) {
                    celebrate();
                }
            } else {
                playSound(false); // صوت الإجابة الخاطئة
                feedbackElement.textContent = `إجابة خاطئة! الإجابة الصحيحة هي: ${currentQuestion.correctAnswer}`;
                feedbackElement.className = 'answer-feedback wrong-answer';
            }
            
            document.getElementById('nextBtn').disabled = false;
        }
        
        // تأثير الاحتفال عند تحقيق إنجاز
        function celebrate() {
            const celebrateEl = document.getElementById('celebrate');
            celebrateEl.style.display = 'flex';
            
            for (let i = 0; i < 80; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.animationDelay = Math.random() * 2 + 's';
                confetti.style.background = getRandomColor();
                celebrateEl.appendChild(confetti);
            }
            
            setTimeout(() => {
                celebrateEl.style.display = 'none';
                celebrateEl.innerHTML = '';
            }, 3000);
        }
        
        // الحصول على لون عشوائي
        function getRandomColor() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
            return colors[Math.floor(Math.random() * colors.length)];
        }    
        // تبديل الوضع الليلي
        function toggleDarkMode() {
            darkMode = !darkMode;
            if (darkMode) {
                document.body.classList.add('dark-mode');
                document.getElementById('darkModeBtn').textContent = '☀️';
            } else {
                document.body.classList.remove('dark-mode');
                document.getElementById('darkModeBtn').textContent = '🌙';
            }
        }
        
        // إنهاء اللعبة
        function endGame() {
            clearInterval(timer);
            
            const percentage = Math.round(score/totalQuestions*100);
            let message;
            
            if (percentage >= 80) {
                message = `ممتاز! نتيجتك النهائية: ${score}/${totalQuestions} (${percentage}%)`;
            } else if (percentage >= 60) {
                message = `جيد! نتيجتك النهائية: ${score}/${totalQuestions} (${percentage}%)`;
            } else {
                message = `تحتاج للمزيد من الممارسة. نتيجتك النهائية: ${score}/${totalQuestions} (${percentage}%)`;
            }
            
            alert(message);
            
            // إعادة الضبط
            document.getElementById('gameArea').style.display = 'none';
            document.querySelector('.game-selection').style.display = 'flex';
        }
        
        // وظائف الشات بوت
        function toggleChat() {
            const chatWindow = document.getElementById('chatWindow');
            chatWindow.style.display = chatWindow.style.display === 'flex' ? 'none' : 'flex';
        }
        
        function askSuggestedQuestion(question) {
            document.getElementById('chatInput').value = question;
            sendMessage();
        }
        
        function handleChatInput(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }
        
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message === '') return;
            
            // إضافة رسالة المستخدم إلى الشات
            addMessage(message, 'user');
            
            // معالجة الرسالة وإضافة رد البوت
            processMessage(message);
            
            // مسح حقل الإدخال
            input.value = '';
        }
        
        function addMessage(text, sender) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            messageDiv.textContent = text;
            messagesContainer.appendChild(messageDiv);
            
            // التمرير إلى الأسفل لرؤية آخر رسالة
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        function processMessage(message) {
            // البحث عن العنصر المطلوب في الرسالة
            let foundElement = null;
            
            // البحث بالاسم العربي
            foundElement = elements.find(element => 
                message.includes(element.name)
            );
            
            // إذا لم يتم العثور على العنصر بالاسم العربي، نبحث بالرمز
            if (!foundElement) {
                foundElement = elements.find(element => 
                    message.includes(element.symbol)
                );
            }
            
            // إذا لم يتم العثور على العنصر بالرمز، نبحث بالرقم الذري
            if (!foundElement) {
                const numberMatch = message.match(/\d+/);
                if (numberMatch) {
                    const atomicNumber = parseInt(numberMatch[0]);
                    foundElement = elements.find(element => 
                        element.number === atomicNumber
                    );
                }
            }
            
            // تحليل السؤال وتوليد الإجابة المناسبة
            if (foundElement) {
                let response = `معلومات عن ${foundElement.name} (${foundElement.symbol}):\n`;
                response += `- العدد الذري: ${foundElement.number}\n`;
                response += `- الكتلة الذرية: ${foundElement.mass}\n`;
                response += `- المجموعة: ${getCategoryName(foundElement.category)}\n`;
                response += `- تم اكتشافه عام: ${foundElement.discovered}\n`;
                response += `- المكتشف: ${foundElement.discoverer}\n`;
                response += `- الحالة في درجة حرارة الغرفة: ${foundElement.state}`;
                
                setTimeout(() => {
                    addMessage(response, 'bot');
                }, 500);
            } else if (message.includes('مساعده') || message.includes('مساعدة') || message.includes('مساعدة')) {
                setTimeout(() => {
                    addMessage("يمكنني مساعدتك في الحصول على معلومات عن أي عنصر كيميائي. فقط اسألني عن اسم العنصر أو رمزه أو عدده الذري. مثلاً:\n- ما هو رمز الذهب؟\n- ما هو العدد الذري للأكسجين؟\n- ما هي مجموعة الصوديوم؟", 'bot');
                }, 500);
            } else if (message.includes('مرحبا') || message.includes('اهلا') || message.includes('hello')) {
                setTimeout(() => {
                    addMessage("مرحباً! أنا مساعد الجدول الدوري. كيف يمكنني مساعدتك اليوم؟", 'bot');
                }, 500);
            } else {
                setTimeout(() => {
                    addMessage("عذراً، لم أفهم سؤالك. يمكنك أن تسألني عن أي عنصر كيميائي بإسمه أو رمزه или عدده الذري. مثلاً: 'ما هو رمز الذهب؟' أو 'ما هو العدد الذري للأكسجين؟'", 'bot');
                }, 500);
            }
        }
        
        // تهيئة الصفحة عند التحميل
        window.onload = function() {
            initPeriodicTable();
            initParticles();
            
            // تحسين الأداء على الهواتف
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js').catch(() => {});
            }
        };
        
        // منع التكبير/التصغير المزدوج على بعض المتصفحات
        document.addEventListener('touchstart', function(event) {
            if (event.touches.length > 1) {
                event.preventDefault();
            }
        }, { passive: false });
        
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>